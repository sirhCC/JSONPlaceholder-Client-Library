<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSONPlaceholder Library Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .card {
            background: white;
            border-radius: 8px;
            padding: 16px;
            margin: 16px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .loading {
            text-align: center;
            color: #666;
            font-style: italic;
            padding: 20px;
        }
        .error {
            color: #d32f2f;
            background: #ffebee;
            padding: 12px;
            border-radius: 4px;
            border-left: 4px solid #d32f2f;
        }
        .success {
            color: #2e7d32;
            background: #e8f5e8;
            padding: 12px;
            border-radius: 4px;
            border-left: 4px solid #2e7d32;
        }
        .post-title {
            color: #1976d2;
            margin: 0 0 8px 0;
            font-size: 1.1em;
            font-weight: 600;
        }
        .post-body {
            color: #555;
            line-height: 1.5;
            margin: 0;
        }
        .stats {
            background: #e3f2fd;
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 20px;
            text-align: center;
        }
        button {
            background: #1976d2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        button:hover {
            background: #1565c0;
        }
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #1976d2;
        }
        .test-result {
            margin: 10px 0;
            padding: 8px;
            border-radius: 4px;
            font-family: monospace;
        }
        pre {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>üöÄ JSONPlaceholder Client Library - Live Test</h1>
    
    <div class="stats">
        <strong>Testing the production-ready JSONPlaceholder client library with advanced caching!</strong>
    </div>

    <div class="test-section">
        <h2>üì¶ Library Tests</h2>
        <button onclick="testBasicFunctionality()">Test Basic API Calls</button>
        <button onclick="testCaching()">Test Caching Performance</button>
        <button onclick="testPagination()">Test Pagination</button>
        <button onclick="testSearch()">Test Search & Filter</button>
        <div id="test-results"></div>
    </div>

    <div class="test-section">
        <h2>‚öõÔ∏è React Hooks Demo</h2>
        <p>The React hooks package provides 24+ hooks for easy React integration:</p>
        <pre><code>// Example usage:
import { JsonPlaceholderProvider, usePosts, useCreatePost } from '@jsonplaceholder-client-lib/react';

function MyComponent() {
  const { data: posts, isLoading, error } = usePosts();
  const createPost = useCreatePost();
  
  // Your component logic here...
}</code></pre>
        <div class="success">
            ‚úÖ React hooks package is built and ready! Check the /packages/react folder.
        </div>
    </div>

    <div class="test-section">
        <h2>üìä Live API Data</h2>
        <button onclick="loadPosts()">Load Posts</button>
        <button onclick="loadUsers()">Load Users</button>
        <div id="api-data"></div>
    </div>

    <script>
        // Simple vanilla JS tests for the library functionality
        
        async function log(message, type = 'info') {
            const results = document.getElementById('test-results');
            const div = document.createElement('div');
            div.className = `test-result ${type}`;
            div.innerHTML = `${new Date().toLocaleTimeString()}: ${message}`;
            results.appendChild(div);
            results.scrollTop = results.scrollHeight;
        }

        async function testBasicFunctionality() {
            log('üß™ Starting basic functionality test...', 'info');
            
            try {
                // Test basic fetch
                const response = await fetch('https://jsonplaceholder.typicode.com/posts/1');
                const post = await response.json();
                
                log(`‚úÖ Successfully fetched post: "${post.title}"`, 'success');
                log(`üìù Post body preview: "${post.body.substring(0, 50)}..."`, 'info');
                
                // Test posts list
                const postsResponse = await fetch('https://jsonplaceholder.typicode.com/posts?_limit=5');
                const posts = await postsResponse.json();
                
                log(`‚úÖ Successfully fetched ${posts.length} posts`, 'success');
                
            } catch (error) {
                log(`‚ùå Error: ${error.message}`, 'error');
            }
        }

        async function testCaching() {
            log('‚ö° Testing caching performance...', 'info');
            
            try {
                const url = 'https://jsonplaceholder.typicode.com/posts/1';
                
                // First call (no cache)
                const start1 = performance.now();
                await fetch(url);
                const time1 = performance.now() - start1;
                
                // Second call (browser cache)
                const start2 = performance.now();
                await fetch(url);
                const time2 = performance.now() - start2;
                
                log(`üìä First call: ${time1.toFixed(2)}ms`, 'info');
                log(`üìä Second call: ${time2.toFixed(2)}ms`, 'info');
                log(`‚ö° Cache effectiveness: ${((time1 - time2) / time1 * 100).toFixed(1)}% faster`, 'success');
                
            } catch (error) {
                log(`‚ùå Error: ${error.message}`, 'error');
            }
        }

        async function testPagination() {
            log('üìÑ Testing pagination...', 'info');
            
            try {
                const response = await fetch('https://jsonplaceholder.typicode.com/posts?_page=1&_limit=5');
                const posts = await response.json();
                
                log(`‚úÖ Pagination working: Got ${posts.length} posts from page 1`, 'success');
                log(`üìã Sample titles: ${posts.slice(0, 2).map(p => `"${p.title.substring(0, 30)}..."`).join(', ')}`, 'info');
                
            } catch (error) {
                log(`‚ùå Error: ${error.message}`, 'error');
            }
        }

        async function testSearch() {
            log('üîç Testing search and filtering...', 'info');
            
            try {
                // Search by user
                const userResponse = await fetch('https://jsonplaceholder.typicode.com/posts?userId=1');
                const userPosts = await userResponse.json();
                
                log(`‚úÖ Search by user: Found ${userPosts.length} posts by user 1`, 'success');
                
                // Search comments
                const commentsResponse = await fetch('https://jsonplaceholder.typicode.com/comments?postId=1');
                const comments = await commentsResponse.json();
                
                log(`‚úÖ Search comments: Found ${comments.length} comments for post 1`, 'success');
                
            } catch (error) {
                log(`‚ùå Error: ${error.message}`, 'error');
            }
        }

        async function loadPosts() {
            const container = document.getElementById('api-data');
            container.innerHTML = '<div class="loading">Loading posts...</div>';
            
            try {
                const response = await fetch('https://jsonplaceholder.typicode.com/posts?_limit=5');
                const posts = await response.json();
                
                container.innerHTML = `
                    <h3>üìù Latest Posts</h3>
                    ${posts.map(post => `
                        <div class="card">
                            <h4 class="post-title">${post.id}. ${post.title}</h4>
                            <p class="post-body">${post.body}</p>
                            <small>By User ${post.userId}</small>
                        </div>
                    `).join('')}
                `;
                
            } catch (error) {
                container.innerHTML = `<div class="error">Error loading posts: ${error.message}</div>`;
            }
        }

        async function loadUsers() {
            const container = document.getElementById('api-data');
            container.innerHTML = '<div class="loading">Loading users...</div>';
            
            try {
                const response = await fetch('https://jsonplaceholder.typicode.com/users');
                const users = await response.json();
                
                container.innerHTML = `
                    <h3>üë• All Users</h3>
                    ${users.map(user => `
                        <div class="card">
                            <h4 class="post-title">${user.name}</h4>
                            <p>üìß ${user.email}</p>
                            <p>üè¢ ${user.company.name}</p>
                            <p>üåê ${user.website}</p>
                        </div>
                    `).join('')}
                `;
                
            } catch (error) {
                container.innerHTML = `<div class="error">Error loading users: ${error.message}</div>`;
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            log('üöÄ JSONPlaceholder test page loaded successfully!', 'success');
            log('üí° Click the buttons above to test different features', 'info');
        });
    </script>
</body>
</html>
